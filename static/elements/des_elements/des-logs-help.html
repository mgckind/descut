<dom-module id="des-logs-help">
<template>
    <style>
        .jobstatus {
      color: var(--color, orange);
    }
    .status {
      display: inline-block;
      box-sizing: border-box;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: var(--paper-yellow-500);
    }
    .green {background: var(--paper-green-500);}
    .red {background: var(--paper-red-500);}
    </style>



 <des-card-help heading="Help">
  <div class="card-content">
 <p> Check the logfile to find more information about the job.  Use list below to change between jobs.</p>
    <hr style="color:black; border-color:black; background-color:black;">
 <paper-item >
    <paper-item-body>
    View results
    </paper-item-body>
    <paper-icon-button icon="launch" on-tap="_seeResults"></paper-icon-button>
    </paper-item>
    <hr style="color:black; border-color:black; background-color:black;">
    <b> Job list shortcut</b>
               <paper-listbox id="smallJobListL" >
                <template is="dom-repeat" id="menu" items="[[data]]">
                     <paper-item on-focus="_focus">
                     <template is="dom-if" if="{{_completed(item.status)}}">
                    <div class="status green" item-icon></div>
                    </template>
                     <template is="dom-if" if="{{_pending(item.status)}}">
                    <div class="status" item-icon></div>
                    </template>
                    <template is="dom-if" if="{{_stop(item.status)}}">
                    <div class="status red" item-icon></div>
                    </template>

                        <div style="font-size: 8.5px;">&nbsp; &nbsp;[[returnName(item.job)]]</div>
                    </paper-item>
            </template>
            </paper-listbox>

    </div>
</des-card-help>

</template>

<script>
      Polymer({
      is: "des-logs-help",
      properties: {
        data: {
            type: Array,
        },
      },
      _print: function() {
        console.log(this.data);
      },
      _focus: function(e){
        //console.log(this._returnName(e.model.item.job));
        document.getElementById("desResults").jobid=this._returnName(e.model.item.job);
        document.getElementById("desResults").jobidFull=e.model.item.job;
        document.getElementById("desResults").username = document.getElementById("desJobs").username;
        document.getElementById("desLog").jobid=this._returnName(e.model.item.job);
        document.getElementById("desLog").jobidFull=e.model.item.job;
        document.getElementById("smallJobList").selected=e.model.index;
        document.getElementById("getLog").generateRequest();

      },
        returnName: function(job) {
        var n1=job.search("__");
        var n2=job.search("{");
        var job0 = job.substring(n1+2,n2-1);
        return job0;
      },
        _returnName: function(job) {
        var n1=job.search("__");
        var n2=job.search("{");
        var job0 = job.substring(n1+2,n2-1);
        return job0;
      },
       _completed: function(status) {
        if (status === "SUCCESS") {return true;}
      },
      _pending: function(status) {
        if (status === "PENDING") {return true;}
      },
      _stop: function(status) {
        if (status != "PENDING" && status != "SUCCESS" ) {return true;}
      },
      _seeResults: function(){
        var pages = document.getElementById("mainPages");
        var help = document.getElementById("helpPages");
        var menu = document.querySelector('paper-menu');
        var desResults = document.getElementById("desResults");
        document.getElementById("desJobs").unselectall();
            desResults.jobid = document.getElementById("desLog").jobid
            desResults.jobidFull = document.getElementById("desLog").jobidFull
            desResults.username =  document.getElementById("desJobs").username;
            app.selection="5";
            pages.selected="5";
            menu.selected="5";
            help.selected="5";


      },



    });


</script>
</dom-module>
