<dom-module id="des-api-mongo">
<template>
    <style include="shared-styles">
    </style>


  
 <paper-card elevation="4"  class="apicard">
      <div class="api-header">Single Epoch API: <span class="api-subheader">Access to path information stored in MongoDB regarding all Single Exposures. </span></div>
    <div class="card-content">
      <div>
      To get the path to a Single Exposure you have to specify <b>at least</b> one of the following (in order of relevance in query): A position (ra,dec),  a Night, or a Exposure number. Further filters include band and ccd number. <br>
      </div>
      <br>
      <table>
     <tr><th>URL:</th><td>/api/mongo/</td></tr>
     <tr><th>Method:</th><td>POST</td></tr>
     <tr><th>Body:</th><td>
     { <br>
    'token'     : token generated  <b>REQUIRED</b> <br>
    'ra'        : string list of RA positions  <b>OPTIONAL</b> <br>
    'dec'       : string list of DEC positions <b>OPTIONAL</b> <br> 
    'band'      : List of bands for single epoch exposures 'g,r,i,z,Y' <b>OPTIONAL</b> (default : All bands) <br> 
    'nite'      : List of nites for a given set of exposures (will return all exposures for a given night)' <b>OPTIONAL</b> <br> 
    'expnum'    : List of exposure numbers  <b>OPTIONAL</b> <br> 
    'ccdnum'    : List of ccd numbers (out of the 70 chips) to be returned <b>OPTIONAL</b> (default : All ccds) <br> 
     }<br>
     </td></tr>
     <tr><th>Success:</th><td> 200: content: {"status": "ok", Information about all CCD returned} </td></tr>
     <tr><th>Errors:</th><td> 400: Missing token parameter.  403: Token doesn't exists or expired </td></tr>
     </table>
     <b>Python example:</b>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">ra <span style="color: #333333">=</span> [<span style="color: #6600EE; font-weight: bold">10.0</span>, <span style="color: #6600EE; font-weight: bold">20.0</span>, <span style="color: #6600EE; font-weight: bold">30.0</span>]
dec<span style="color: #333333">=</span> [<span style="color: #6600EE; font-weight: bold">40.0</span>, <span style="color: #6600EE; font-weight: bold">50.0</span>, <span style="color: #6600EE; font-weight: bold">60.0</span>]
<span style="color: #888888"># create body of request</span>
<span style="color: #888888"># Either a position, a nite or a exposure number is required in that order of relevance</span>
body <span style="color: #333333">=</span> {
    <span style="background-color: #fff0f0">&#39;token&#39;</span>        :  <span style="background-color: #fff0f0">&#39;aaa...&#39;</span>,          <span style="color: #888888"># required</span>
    <span style="background-color: #fff0f0">&#39;ra&#39;</span>           : <span style="color: #007020">str</span>(ra),              <span style="color: #888888"># optional</span>
    <span style="background-color: #fff0f0">&#39;dec&#39;</span>          : <span style="color: #007020">str</span>(dec),          <span style="color: #888888"># optional</span>
    <span style="background-color: #fff0f0">&#39;band&#39;</span>         : <span style="background-color: #fff0f0">&#39;g,r,i&#39;</span>,              <span style="color: #888888"># optional (default: all bands)</span>
    <span style="background-color: #fff0f0">&#39;nite&#39;</span>         :   <span style="background-color: #fff0f0">&#39;12345&#39;</span>,         <span style="color: #888888"># optional</span>
    <span style="background-color: #fff0f0">&#39;expnum&#39;</span>       : <span style="background-color: #fff0f0">&#39;2353324&#39;</span>,    <span style="color: #888888"># optional</span>
    <span style="background-color: #fff0f0">&#39;ccdnum&#39;</span>       : <span style="background-color: #fff0f0">&#39;3,4,5&#39;</span>          <span style="color: #888888"># optional (default: all)</span>
}
req <span style="color: #333333">=</span> requests<span style="color: #333333">.</span>post(<span style="background-color: #fff0f0">&#39;http://descut.cosmology.illinois.edu/api/mongo/&#39;</span>,data<span style="color: #333333">=</span>body)
<span style="color: #008800; font-weight: bold">print</span>(req)
<span style="color: #333333">&lt;</span>Response [<span style="color: #0000DD; font-weight: bold">200</span>]<span style="color: #333333">&gt;</span>
<span style="color: #008800; font-weight: bold">print</span>(req<span style="color: #333333">.</span>text)
{<span style="background-color: #fff0f0">&quot;status&quot;</span>: <span style="background-color: #fff0f0">&quot;ok&quot;</span>}
</pre></div>
    </div>
    </paper-card>


</template>

<script>
      Polymer({
      is: "des-api-mongo",
    });
</script>
</dom-module>
